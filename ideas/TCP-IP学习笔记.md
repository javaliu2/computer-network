# 第1章 概述

## 1.1 体系结构原则

## 1.2 设计与实现

1、采取分层的思想，这也是分而治之理念的体现吧。

2、

## 1.3 TCP/IP协议族和协议

1、ARPANET参考模型

![image-20241115113133648](/home/xs/.config/Typora/typora-user-images/image-20241115113133648.png)

2、ICMP（Internet Control Message Protocol）

互联网控制报文协议，用于在网络设备之间传递控制信息，主要用于诊断和错误报告。它通过发送“回显请求”和“回显应答”来检查网络连接的可达性（如ping命令）。ICMP帮助网络设备了解数据包传输中的问题，例如目标不可达、时间超时等。

3、复用、分解和封装

![image-20241115114117478](/home/xs/.config/Typora/typora-user-images/image-20241115114117478.png)

### 关于复用的解释：

问：针对传输层与网络层，传输层的复用指的是网络层可以承载不同传输层协议；同理对于应用层和传输层，传输层通过端口实现了应用层数据的分解，达到了复用传输层的目的

G哥答：

你的理解是对的，下面我会进一步详细说明每一层复用的概念，尤其是在传输层和网络层之间以及传输层和应用层之间的复用。

#### 1. **传输层与网络层的复用**
在**传输层**和**网络层**之间的复用可以理解为：**同一网络层（IP协议）可以承载不同的传输层协议**。这意味着网络层并不关心数据的具体类型（如TCP、UDP等），它只负责将数据从源主机传送到目标主机。

- **网络层的复用**：网络层的主要功能是通过IP协议将数据包从源主机传输到目标主机。IP数据报（Internet Protocol Datagram）是独立于上层协议（如TCP、UDP等）存在的。不同的传输层协议（如TCP、UDP、ICMP等）都使用相同的网络层（IP协议）进行数据传输。
  - 网络层的协议字段（IP头部中的`protocol`字段）指定了数据包的承载协议是TCP、UDP还是其他协议。
  - 例如，当数据包通过网络传输时，无论它是TCP协议数据包还是UDP协议数据包，网络层的IP协议都只负责路由和传输，不会关心它上面携带的是哪种传输协议的数据。

#### 2. **应用层与传输层的复用**
在**应用层**和**传输层**之间，复用指的是**传输层通过端口号将不同应用的数据区分开**，从而实现多个应用程序在同一台主机上共享传输层协议（如TCP或UDP）。

- **传输层的复用**：传输层的主要功能是向不同的应用程序提供数据传输服务。通过端口号，传输层可以将应用层的数据分配到不同的应用程序。具体来说：
  - **TCP和UDP协议**通过端口号来区分不同的应用程序。每个应用程序监听一个特定的端口，传输层利用端口号来将收到的数据正确地交给相应的应用程序。
  - 例如，Web服务器通常监听80号端口（HTTP），邮件服务器可能监听25号端口（SMTP）。当数据到达主机时，传输层根据端口号将数据包交给正确的应用层程序。
  
  - 传输层协议如TCP或UDP使用源端口和目标端口来标识数据流。通过这种方式，同一台计算机可以同时运行多个应用程序（如浏览器、FTP客户端等），而它们的网络通信是通过不同的端口号来区分的。

#### 3. **总结**
- **传输层与网络层的复用**：网络层（IP）可以承载多种传输层协议（如TCP、UDP等），这使得同一网络层能够同时处理不同的协议。
- **应用层与传输层的复用**：传输层通过端口号将不同的应用程序的数据分开，实现了不同应用共享相同传输层协议（如TCP或UDP）的目的。

通过这些复用机制，TCP/IP协议栈能够高效地支持多个应用程序、多个协议和多个网络通信流。

## 1.4 我的摘抄

1、TCP/IP确实是一个开放的系统，协议族定义和很多实现是公开的，收费很少或根本不收费。

2、尽管很多人认为因特网和万维网是可交换的术语，但我们通常认为因特网在计算机之间提供了消息通信能力，而万维网是一种使用因特网来通信的具体应用。

## 1.5 定义或常识

1、PDU（protocol data unit）协议数据单元，每一层有自己对应的PDU

2、IP层发送给链路层协议的PDU称为IP数据报，大小64KB

3、链路层PDU称之为帧

4、TCP发送到IP的PDU称为TCP段